{
  "name": "VidyaMitra Voice Interview Flow",
  "description": "STT transcript -> API -> TTS response",
  "nodes": [
    {
      "id": "voice_webhook",
      "name": "Voice Input",
      "type": "n8n-nodes-base.webhook",
      "parameters": {"path": "voice-interview", "httpMethod": "POST"}
    },
    {
      "id": "process_voice",
      "name": "Process with LLM",
      "type": "n8n-nodes-base.httpRequest",
      "parameters": {
        "url": "http://your-api:8000/api/webhook/voice/process",
        "method": "POST",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify({ user_id: $json.user_id, data: { transcript: $json.transcript, current_question: $json.current_question, context: { question_index: $json.question_index, total_questions: $json.total_questions, next_question: $json.next_question } } }) }}"
      }
    },
    {
      "id": "respond_tts",
      "name": "Return for TTS",
      "type": "n8n-nodes-base.respondToWebhook",
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ { response_text: $json.response_text, evaluation: $json.evaluation, is_complete: $json.is_complete } }}"
      }
    }
  ],
  "connections": {
    "voice_webhook": {"main": [[{"node": "process_voice"}]]},
    "process_voice": {"main": [[{"node": "respond_tts"}]]}
  }
}
